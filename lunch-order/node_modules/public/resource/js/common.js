function EID(id){
	return document.getElementById(id);	
}

function setCookie(cookie_name, value){
        document.cookie=cookie_name+"="+escape(value);
}

function getCookie(cookie_name){
	var allcookies = document.cookie;
	var cookie_pos = allcookies.indexOf(cookie_name);
	if (cookie_pos != -1){
		cookie_pos += cookie_name.length + 1;
		var cookie_end = allcookies.indexOf(";", cookie_pos);

		if (cookie_end == -1){
			cookie_end = allcookies.length;
		}

		var value = unescape(allcookies.substring(cookie_pos, cookie_end));
	}
	
	if (value == undefined)
		return '';
	return value;
}

function onformsubmit(fname){
	EID(fname).submit();
}

String.prototype.trim = function() {
    return this.replace(/^\s+/g,"").replace(/\s+$/g,"");
}

function check_auth(result){
	if (result == "auth_error"){
		showbox("您没有执行该操作的权限");
		return false;
	}else if (result == "timeout"){
		showbox("游戏服务器没有响应您的操作，操作已经超时");
		return false;
	}else if (result == "format_error"){
		showbox("格式错误，请检查您的表单是否有未填的空白");
		return false;
	}else if (result == "noserver"){
		showbox("没有找到对应的游戏服务器，发送指令失败");
		return false;
	}else if (result == "attach_error"){
		showbox("附件格式错误");
		return false;
	}else if (result == "auth_timeout"){
		showbox("登录已超时，请登出后重新登录");
		return false;
	}else if (result == "format_error"){
		showbox("格式错误，请检查您的表单是否有未填的空白");
		return false;
	}else if (result == "noserver"){
		showbox("没有找到对应的游戏服务器，无法发送指令");
		return false;
	}
	return true;
}

function showbox(text){	
	$$("msgbox").innerHTML = '<dl id="idBox" class="lightbox" style="top:10%;left:5%; text-align:center">'
	+'<dd>'
    +'<div id="abtext"></div>'
	+'</dd>'
    +'<a class="abutton" id="idBoxClose" href="#">确定</a>'
	+'</dl>';
	
	var ab = new AlertBox("idBox"), lock = false;
	ab.center = true;
	function lockup(e){ e.preventDefault(); }
	function lockout(e){ e.stopPropagation(); }
	
	ab.onShow = function(){	
		if ( lock ) {
			$$E.addEvent( document, "keydown", lockup );
			$$E.addEvent( this.box, "keydown", lockout );
			OverLay.show();
		}
	}
	ab.onClose = function(){
		$$E.removeEvent( document, "keydown", lockup );
		$$E.removeEvent( this.box, "keydown", lockout );
		OverLay.close();
	}
	
	$$("idBoxClose").onclick = function(){ ab.close(); }
	
	lock = !lock;
	$$("abtext").innerHTML = text;
	ab.show();
}
